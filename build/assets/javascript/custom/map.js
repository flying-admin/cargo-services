function initMap(){markerImg={url:"./../assets/images/content/marker.png",size:new google.maps.Size(36,36),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(18,18),scaledSize:new google.maps.Size(36,36)},markerShape={coords:[0,0,36,0,36,36,0,36],type:"poly"},clusterImg="./../assets/images/content/cluster",clusterExt="svg",initContactMap()}function initContactMap(){var t=document.getElementsByClassName("map__map")[0];map=new google.maps.Map(t,{zoom:3,center:{lat:0,lng:0}});var e=locations.map(function(t){return new google.maps.Marker({position:t,map:map,icon:markerImg,shape:markerShape})}),a={styles:[{anchorIcon:[18,18],height:36,width:36,url:clusterImg+"1."+clusterExt,textColor:"white",textSize:16},{anchorIcon:[18,18],height:36,width:36,url:clusterImg+"2."+clusterExt,textColor:"white",textSize:16},{anchorIcon:[18,18],height:36,width:36,url:clusterImg+"3."+clusterExt,textColor:"white",textSize:16},{anchorIcon:[18,18],height:36,width:36,url:clusterImg+"4."+clusterExt,textColor:"white",textSize:16},{anchorIcon:[18,18],height:36,width:36,url:clusterImg+"5."+clusterExt,textColor:"white",textSize:16}]};new MarkerClusterer(map,e,a);boundsMarkers(e)}function boundsMarkers(t){for(var e=new google.maps.LatLngBounds,a=0;a<t.length;a++)e.extend(t[a].getPosition());map.fitBounds(e),map.panTo(e.getCenter())}function minValAssociative(t){var e,a;for(key in t)e!=undefined?t[key]<e&&(e=t[key],a=key):(e=t[key],a=key);return a}function distance(t,e,a,o,n){var i=Math.PI*t/180,r=Math.PI*a/180,l=e-o,s=Math.PI*l/180,c=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos(s);return c=Math.acos(c),c=180*c/Math.PI,c=60*c*1.1515,"K"==n&&(c*=1.609344),"N"==n&&(c*=.8684),c}$(function(){$(".map").length});var map,markerImg,markerShape,clusterImg,clusterShape,locations,myPosLat,myPosLong,myip,xmlhttpmyip=new XMLHttpRequest,urlmyip="https://api.ipgeolocation.io/getip";xmlhttpmyip.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);myip=t.ip;var e=new XMLHttpRequest,a="https://api.ipgeolocation.io/ipgeo?ip="+myip+"&apiKey=4629ad0028244781981d43d142e9e6fa";e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);myPosLat=t.latitude,myPosLong=t.longitude,$(document).ready(function(){var t=[];for(loc in locations)place=locations[loc],t[place.tag]=distance(myPosLat,myPosLong,place.lat,place.lng);var e=minValAssociative(t),a=locations.find(function(t){if(t.tag===e)return t});$(".header .phone-number a").attr("href","tel:"+a.tel),$(".header .phone-number .text").text(a.tel),$(".header .mail-address a").attr("href","mailto:"+a.mail),$(".header .mail-address .text").text(a.mail),$(".localiza-oficina").on("click",function(t){t.preventDefault(),map.setCenter({lat:parseFloat(a.lat),lng:parseFloat(a.lng)})})})}},e.open("GET",a,!0),e.send()}},xmlhttpmyip.open("GET",urlmyip,!0),xmlhttpmyip.send(),locations=[{lat:40.404867,lng:-3.67312,tag:"madrid",tel:"+34 914 341 820",mail:"infomad@cargoservicesgroup.com"},{lat:41.389582,lng:2.173952,tag:"barcelona",tel:"+34 933 019 633",mail:"infobcn@cargoservicesgroup.com"},{lat:42.810118,lng:-1.660274,tag:"pamplona",tel:"+34 948 172 245",mail:"infopna@cargoservicesgroup.com"},{lat:54.511266,lng:18.541763,tag:"polonia",tel:"+48 58 668 44 18",mail:"infopol@cargoservicesgroup.com"},{lat:19.410481,lng:-99.181033,tag:"mexico",tel:"+52 55 5543 2007",mail:"comercial@cargoservicesgroup.com.mx"},{lat:8.98329,lng:-79.515534,tag:"panama",tel:"+507 303 2320",mail:"infopan@cargoservicesgroup.com"},{lat:23.119717,lng:-82.429884,tag:"cuba",tel:"+537 204 7211",mail:"n.carnota@cargoservicesgroup.cu"}];